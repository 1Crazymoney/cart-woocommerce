(()=>{"use strict";const e=window.React,t=window.wp.element,n=window.wc.wcBlocksRegistry,c=window.wp.htmlEntities,a=window.wc.wcSettings,o="mercadopago_blocks_update_cart",i=({title:t,description:n,linkText:c,linkSrc:a})=>(0,e.createElement)("div",{className:"mp-checkout-pro-test-mode"},(0,e.createElement)("test-mode",{title:t,description:n,"link-text":c,"link-src":a})),s=({name:t,buttonName:n,columns:c})=>(0,e.createElement)("input-table",{name:t,"button-name":n,columns:c}),r=({isVisible:t,message:n,inputId:c,id:a,dataMain:o})=>(0,e.createElement)("input-helper",{isVisible:t,message:n,"input-id":c,id:a,"data-main":o}),l=({labelMessage:t,helperMessage:n,inputName:c,hiddenId:a,inputDataCheckout:o,selectId:i,selectName:s,selectDataCheckout:r,flagError:l,documents:m,validate:d})=>(0,e.createElement)("div",{className:"mp-checkout-ticket-input-document"},(0,e.createElement)("input-document",{"label-message":t,"helper-message":n,"input-name":c,"hidden-id":a,"input-data-checkout":o,"select-id":i,"select-name":s,"select-data-checkout":r,"flag-error":l,documents:m,validate:d})),m=({description:t,linkText:n,linkSrc:c,checkoutClass:a="pro"})=>(0,e.createElement)("div",{className:`mp-checkout-${a}-terms-and-conditions`},(0,e.createElement)("terms-and-conditions",{description:t,"link-text":n,"link-src":c}));var d;const p="woo-mercado-pago-ticket",u=(0,a.getSetting)("woo-mercado-pago-ticket_data",{}),_=(0,c.decodeEntities)(u.title)||"Checkout Ticket",k=n=>{(e=>{const{extensionCartUpdate:n}=wc.blocksCheckout,{eventRegistration:c,emitResponse:a}=e,{onPaymentSetup:i}=c;(0,t.useEffect)((()=>{((e,t)=>{e({namespace:o,data:{action:"add",gateway:t}})})(n,p);const e=i((()=>({type:a.responseTypes.SUCCESS})));return()=>{((e,t)=>{e({namespace:o,data:{action:"remove",gateway:t}})})(n,p),e()}}),[i])})(n);const{test_mode_title:c,test_mode_description:a,test_mode_link_text:d,test_mode_link_src:_,input_document_label:k,input_document_helper:h,ticket_text_label:g,input_table_button:E,input_helper_label:y,payment_methods:b,currency_ratio:S,amount:w,site_id:v,terms_and_conditions_description:N,terms_and_conditions_link_text:f,terms_and_conditions_link_src:C,test_mode:x}=u.params,T=(0,t.useRef)(null),{eventRegistration:M,emitResponse:R}=n,{onPaymentSetup:P}=M;let I={labelMessage:k,helperMessage:h,validate:"true",selectId:"docType",flagError:"mercadopago_ticket[docNumberError]",inputName:"mercadopago_ticket[docNumber]",selectName:"mercadopago_ticket[docType]",documents:null};return"MLB"===v?I.documents='["CPF","CNPJ"]':"MLU"===v&&(I.documents='["CI","OTRO"]'),(0,t.useEffect)((()=>{const e=P((async()=>{const e={};e["mercadopago_ticket[amount]"]=w.toString(),e["mercadopago_ticket[doc_type]"]=T.current.querySelector("#docType").value,e["mercadopago_ticket[doc_number]"]=T.current.querySelector("#form-checkout__identificationNumber-container > input").value;const t=b.find((e=>{const t=`#${e.id}`,n=T.current.querySelector(t);return n&&n.checked}));return t&&(e["mercadopago_ticket[payment_method_id]"]=T.current.querySelector(`#${t.id}`).value),{type:R.responseTypes.SUCCESS,meta:{paymentMethodData:e}}}));return()=>e()}),[R.responseTypes.ERROR,R.responseTypes.SUCCESS,P]),(0,e.createElement)("div",{className:"mp-checkout-container"},(0,e.createElement)("div",{className:"mp-checkout-ticket-container"},(0,e.createElement)("div",{ref:T,className:"mp-checkout-ticket-content"},x?(0,e.createElement)(i,{title:c,description:a,"link-text":d,"link-src":_}):null,I?(0,e.createElement)(l,{...I}):null,(0,e.createElement)("p",{className:"mp-checkout-ticket-text"},g),(0,e.createElement)(s,{name:"mercadopago_ticket[payment_method_id]",buttonName:E,columns:JSON.stringify(b)}),(0,e.createElement)(r,{isVisible:"false",message:y,inputId:"mp-payment-method-helper",id:"payment-method-helper"}),(0,e.createElement)("div",{id:"mp-box-loading"}))),(0,e.createElement)(m,{description:N,linkText:f,linkSrc:C,checkoutClass:"ticket"}))},h={name:p,label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components,a=(0,c.decodeEntities)(u?.params?.fee_title||""),o=`${_} ${a}`;return(0,e.createElement)(n,{text:o})}),null),content:(0,e.createElement)(k,null),edit:(0,e.createElement)(k,null),canMakePayment:()=>!0,ariaLabel:_,supports:{features:null!==(d=u?.supports)&&void 0!==d?d:[]}};(0,n.registerPaymentMethod)(h)})();