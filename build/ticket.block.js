(()=>{"use strict";const e=window.React,t=window.wc.wcBlocksRegistry,n=window.wc.wcSettings,a=window.wp.element,c=window.wp.htmlEntities,o="mercadopago_blocks_update_cart",i=({labelMessage:t,helperMessage:n,inputName:a,hiddenId:c,inputDataCheckout:o,selectId:i,selectName:s,selectDataCheckout:l,flagError:r,documents:m,validate:d})=>(0,e.createElement)("div",{className:"mp-checkout-ticket-input-document"},(0,e.createElement)("input-document",{"label-message":t,"helper-message":n,"input-name":a,"hidden-id":c,"input-data-checkout":o,"select-id":i,"select-name":s,"select-data-checkout":l,"flag-error":r,documents:m,validate:d})),s=({isVisible:t,message:n,inputId:a,id:c,dataMain:o})=>(0,e.createElement)("input-helper",{isVisible:t,message:n,"input-id":a,id:c,"data-main":o}),l=({name:t,buttonName:n,columns:a})=>(0,e.createElement)("input-table",{name:t,"button-name":n,columns:a}),r=({description:t,linkText:n,linkSrc:a,checkoutClass:c="pro"})=>(0,e.createElement)("div",{className:`mp-checkout-${c}-terms-and-conditions`},(0,e.createElement)("terms-and-conditions",{description:t,"link-text":n,"link-src":a})),m=({title:t,description:n,linkText:a,linkSrc:c})=>(0,e.createElement)("div",{className:"mp-checkout-pro-test-mode"},(0,e.createElement)("test-mode",{title:t,description:n,"link-text":a,"link-src":c}));var d;const p="woo-mercado-pago-ticket",u=(0,n.getSetting)("woo-mercado-pago-ticket_data",{}),_=(0,c.decodeEntities)(u.title)||"Checkout Ticket",k=t=>{(e=>{const{extensionCartUpdate:t}=wc.blocksCheckout,{eventRegistration:n,emitResponse:c}=e,{onPaymentSetup:i}=n;(0,a.useEffect)((()=>{((e,t)=>{e({namespace:o,data:{action:"add",gateway:t}})})(t,p);const e=i((()=>({type:c.responseTypes.SUCCESS})));return()=>{((e,t)=>{e({namespace:o,data:{action:"remove",gateway:t}})})(t,p),e()}}),[i])})(t);const{test_mode_title:n,test_mode_description:c,test_mode_link_text:d,test_mode_link_src:_,input_document_label:k,input_document_helper:y,ticket_text_label:g,input_table_button:h,input_helper_label:E,payment_methods:b,amount:f,site_id:S,terms_and_conditions_description:w,terms_and_conditions_link_text:x,terms_and_conditions_link_src:v,test_mode:N}=u.params,C=(0,a.useRef)(null),{eventRegistration:R,emitResponse:T}=t,{onPaymentSetup:M}=R;let I={labelMessage:k,helperMessage:y,validate:"true",selectId:"docType",flagError:"mercadopago_ticket[docNumberError]",inputName:"mercadopago_ticket[docNumber]",selectName:"mercadopago_ticket[docType]",documents:null};return"MLB"===S?I.documents='["CPF","CNPJ"]':"MLU"===S&&(I.documents='["CI","OTRO"]'),(0,a.useEffect)((()=>{const e=M((async()=>{const e=document.getElementById("mp-doc-number-helper"),t=document.getElementById("mp-payment-method-helper"),n={"mercadopago_ticket[site_id]":S,"mercadopago_ticket[amount]":f.toString(),"mercadopago_ticket[doc_type]":C.current.querySelector("#docType")?.value,"mercadopago_ticket[doc_number]":C.current.querySelector("#form-checkout__identificationNumber-container > input")?.value},a=b.find((e=>{const t=`#${e.id}`,n=C.current.querySelector(t);return n&&n.checked}));return a&&(n["mercadopago_ticket[payment_method_id]"]=C.current.querySelector(`#${a.id}`).value,t.style.display="none"),""===n["mercadopago_ticket[doc_number]"]&&(console.log(" inputDocHelper.style.display = 'flex'"),e.style.display="flex"),n["mercadopago_ticket[payment_method_id]"]||(t.style.display="flex",console.log(" inputPaymentMethod.style.display = 'flex'")),{type:"flex"===e.style.display||"flex"===t.style.display?T.responseTypes.ERROR:T.responseTypes.SUCCESS,meta:{paymentMethodData:n}}}));return()=>e()}),[T.responseTypes.ERROR,T.responseTypes.SUCCESS,M]),(0,e.createElement)("div",{className:"mp-checkout-container"},(0,e.createElement)("div",{className:"mp-checkout-ticket-container"},(0,e.createElement)("div",{ref:C,className:"mp-checkout-ticket-content"},N?(0,e.createElement)(m,{title:n,description:c,"link-text":d,"link-src":_}):null,I.documents?(0,e.createElement)(i,{...I}):null,(0,e.createElement)("p",{className:"mp-checkout-ticket-text"},g),(0,e.createElement)(l,{name:"mercadopago_ticket[payment_method_id]",buttonName:h,columns:JSON.stringify(b)}),(0,e.createElement)(s,{isVisible:"false",message:E,inputId:"mp-payment-method-helper",id:"payment-method-helper"}),(0,e.createElement)("div",{id:"mp-box-loading"}))),(0,e.createElement)(r,{description:w,linkText:x,linkSrc:v,checkoutClass:"ticket"}))},y={name:p,label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components,a=(0,c.decodeEntities)(u?.params?.fee_title||""),o=`${_} ${a}`;return(0,e.createElement)(n,{text:o})}),null),content:(0,e.createElement)(k,null),edit:(0,e.createElement)(k,null),canMakePayment:()=>!0,ariaLabel:_,supports:{features:null!==(d=u?.supports)&&void 0!==d?d:[]}};(0,t.registerPaymentMethod)(y)})();