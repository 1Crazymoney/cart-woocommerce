(()=>{"use strict";const e=window.React,t=window.wc.wcBlocksRegistry,n=window.wc.wcSettings,c=window.wp.element,a=window.wp.htmlEntities,o="mercadopago_blocks_update_cart",i=({labelMessage:t,helperMessage:n,inputName:c,hiddenId:a,inputDataCheckout:o,selectId:i,selectName:s,selectDataCheckout:r,flagError:l,documents:m,validate:d})=>(0,e.createElement)("div",{className:"mp-checkout-ticket-input-document"},(0,e.createElement)("input-document",{"label-message":t,"helper-message":n,"input-name":c,"hidden-id":a,"input-data-checkout":o,"select-id":i,"select-name":s,"select-data-checkout":r,"flag-error":l,documents:m,validate:d})),s=({isVisible:t,message:n,inputId:c,id:a,dataMain:o})=>(0,e.createElement)("input-helper",{isVisible:t,message:n,"input-id":c,id:a,"data-main":o}),r=({name:t,buttonName:n,columns:c})=>(0,e.createElement)("input-table",{name:t,"button-name":n,columns:c}),l=({description:t,linkText:n,linkSrc:c,checkoutClass:a="pro"})=>(0,e.createElement)("div",{className:`mp-checkout-${a}-terms-and-conditions`},(0,e.createElement)("terms-and-conditions",{description:t,"link-text":n,"link-src":c})),m=({title:t,description:n,linkText:c,linkSrc:a})=>(0,e.createElement)("div",{className:"mp-checkout-pro-test-mode"},(0,e.createElement)("test-mode",{title:t,description:n,"link-text":c,"link-src":a}));var d;const p="woo-mercado-pago-ticket",u=(0,n.getSetting)("woo-mercado-pago-ticket_data",{}),_=(0,a.decodeEntities)(u.title)||"Checkout Ticket",k=t=>{(e=>{const{extensionCartUpdate:t}=wc.blocksCheckout,{eventRegistration:n,emitResponse:a}=e,{onPaymentSetup:i}=n;(0,c.useEffect)((()=>{((e,t)=>{e({namespace:o,data:{action:"add",gateway:t}})})(t,p);const e=i((()=>({type:a.responseTypes.SUCCESS})));return()=>{((e,t)=>{e({namespace:o,data:{action:"remove",gateway:t}})})(t,p),e()}}),[i])})(t);const{test_mode_title:n,test_mode_description:a,test_mode_link_text:d,test_mode_link_src:_,input_document_label:k,input_document_helper:y,ticket_text_label:h,input_table_button:g,input_helper_label:E,payment_methods:b,amount:f,site_id:w,terms_and_conditions_description:S,terms_and_conditions_link_text:v,terms_and_conditions_link_src:N,test_mode:x}=u.params,C=(0,c.useRef)(null),{eventRegistration:R,emitResponse:T}=t,{onPaymentSetup:M}=R;let I={labelMessage:k,helperMessage:y,validate:"true",selectId:"docType",flagError:"mercadopago_ticket[docNumberError]",inputName:"mercadopago_ticket[docNumber]",selectName:"mercadopago_ticket[docType]",documents:function(e){switch(e){case"MLB":return'["CPF","CNPJ"]';case"MLU":return'["CI","OTRO"]';default:return null}}(w)};return(0,c.useEffect)((()=>{const e=M((async()=>{const e=document.getElementById("mp-doc-number-helper"),t=document.getElementById("mp-payment-method-helper"),n={"mercadopago_ticket[site_id]":w,"mercadopago_ticket[amount]":f.toString(),"mercadopago_ticket[doc_type]":C.current.querySelector("#docType")?.value,"mercadopago_ticket[doc_number]":C.current.querySelector("#form-checkout__identificationNumber-container > input")?.value},c=b.find((e=>{const t=`#${e.id}`,n=C.current.querySelector(t);return n&&n.checked}));function a(e,t){e&&e.style&&(e.style.display=t)}function o(e){return e&&"flex"===e.style.display}return c&&(n["mercadopago_ticket[payment_method_id]"]=C.current.querySelector(`#${c.id}`).value,t.style.display="none"),I.documents&&""===n["mercadopago_ticket[doc_number]"]&&a(e,"flex"),n["mercadopago_ticket[payment_method_id]"]||a(t,"flex"),{type:o(e)||o(t)?T.responseTypes.ERROR:T.responseTypes.SUCCESS,meta:{paymentMethodData:n}}}));return()=>e()}),[T.responseTypes.ERROR,T.responseTypes.SUCCESS,M]),(0,e.createElement)("div",{className:"mp-checkout-container"},(0,e.createElement)("div",{className:"mp-checkout-ticket-container"},(0,e.createElement)("div",{ref:C,className:"mp-checkout-ticket-content"},x?(0,e.createElement)(m,{title:n,description:a,"link-text":d,"link-src":_}):null,I.documents?(0,e.createElement)(i,{...I}):null,(0,e.createElement)("p",{className:"mp-checkout-ticket-text"},h),(0,e.createElement)(r,{name:"mercadopago_ticket[payment_method_id]",buttonName:g,columns:JSON.stringify(b)}),(0,e.createElement)(s,{isVisible:"false",message:E,inputId:"mp-payment-method-helper",id:"payment-method-helper"}),(0,e.createElement)("div",{id:"mp-box-loading"}))),(0,e.createElement)(l,{description:S,linkText:v,linkSrc:N,checkoutClass:"ticket"}))},y={name:p,label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components,c=(0,a.decodeEntities)(u?.params?.fee_title||""),o=`${_} ${c}`;return(0,e.createElement)(n,{text:o})}),null),content:(0,e.createElement)(k,null),edit:(0,e.createElement)(k,null),canMakePayment:()=>!0,ariaLabel:_,supports:{features:null!==(d=u?.supports)&&void 0!==d?d:[]}};(0,t.registerPaymentMethod)(y)})();