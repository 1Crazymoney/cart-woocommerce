(()=>{"use strict";const e=window.React,t=window.wc.wcBlocksRegistry,n=window.wc.wcSettings,c=window.wp.element,a=window.wp.htmlEntities,i=({labelMessage:t,helperMessage:n,inputName:c,selectName:a,flagError:i,documents:o,validate:r,selectId:s})=>(0,e.createElement)("div",{className:"mp-checkout-ticket-input-document"},(0,e.createElement)("input-document",{"label-message":t,"helper-message":n,"input-name":c,"select-id":s,"select-name":a,"flag-error":i,documents:o,validate:r})),o=({isVisible:t,message:n,inputId:c,id:a})=>(0,e.createElement)("input-table",{isVisible:t,message:n,"input-id":c,id:a}),r=({name:t,buttonName:n,columns:c})=>(0,e.createElement)("input-table",{name:t,"button-name":n,columns:c}),s=({description:t,linkText:n,linkSrc:c})=>(0,e.createElement)("div",{className:"mp-checkout-pro-terms-and-conditions"},(0,e.createElement)("terms-and-conditions",{description:t,"link-text":n,"link-src":c})),l=({title:t,description:n,linkText:c,linkSrc:a})=>(0,e.createElement)("div",{className:"mp-checkout-pro-test-mode"},(0,e.createElement)("test-mode",{title:t,description:n,"link-text":c,"link-src":a}));var m;const d=(0,n.getSetting)("woo-mercado-pago-ticket_data",{}),u=(0,a.decodeEntities)(d.title)||"Checkout Ticket",p=t=>{const{test_mode_title:n,test_mode_description:a,test_mode_link_text:m,test_mode_link_src:u,input_document_label:p,input_document_helper:_,ticket_text_label:k,input_table_button:E,input_helper_label:g,payment_methods:y,currency_ratio:h,amount:b,site_id:w,terms_and_conditions_description:N,terms_and_conditions_link_text:S,terms_and_conditions_link_src:v,test_mode:f}=d.params,{eventRegistration:x,emitResponse:M}=t,{onPaymentSetup:T}=x,R=(0,c.useRef)(null);let C={labelMessage:p,helperMessage:_,inputName:"mercadopago_ticket[docNumber]",selectId:"docType",selectName:"mercadopago_ticket[docType]",flagError:"mercadopago_ticket[docNumberError]",documents:null,validate:"true"};return"MLB"===w?C.documents='["CPF","CNPJ"]':"MLU"===w&&(C.documents='["CI","OTRO"]'),(0,c.useEffect)((()=>{const e=T((async()=>{const e={payment_from_blocks:!0};e.amount=b.toString(),e.site_id=w,e.currency_ratio=h,e.mercadopago_ticket_doc_number=R.current.querySelector("#form-checkout__identificationNumber-container > input").value,e.mercadopago_ticket_doc_type=R.current.querySelector("#docType").value;const t=y.find((e=>{const t=`#${e.id}`,n=R.current.querySelector(t);return n&&n.checked}));return t&&(e.mercadopago_ticket_payment_method=R.current.querySelector(`#${t.id}`).value),{type:M.responseTypes.SUCCESS,meta:{paymentMethodData:e}}}));return()=>{e()}}),[M.responseTypes.ERROR,M.responseTypes.SUCCESS,T]),(0,e.createElement)("div",{className:"mp-checkout-container"},(0,e.createElement)("div",{className:"mp-checkout-ticket-container"},(0,e.createElement)("div",{ref:R,className:"mp-checkout-ticket-content"},f?(0,e.createElement)(l,{title:n,description:a,"link-text":m,"link-src":u}):null,C?(0,e.createElement)(i,{...C}):null,(0,e.createElement)("p",{className:"mp-checkout-ticket-tex"},k),(0,e.createElement)(r,{name:"mercadopago_ticket[paymentMethodId]",buttonName:E,columns:JSON.stringify(y)}),(0,e.createElement)(o,{isVisible:"false",message:g,inputId:"mp-payment-method-helper",id:"payment-method-helper"}),(0,e.createElement)("div",{id:"mp-box-loading"}))),(0,e.createElement)(s,{description:N,linkText:S,linkSrc:v}))},_={name:"woo-mercado-pago-ticket",label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components;return(0,e.createElement)(n,{text:u})}),null),content:(0,e.createElement)(p,null),edit:(0,e.createElement)(p,null),canMakePayment:()=>!0,ariaLabel:u,supports:{features:null!==(m=d?.supports)&&void 0!==m?m:[]}};(0,t.registerPaymentMethod)(_)})();
