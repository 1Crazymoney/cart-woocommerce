(()=>{"use strict";const e=window.React,t=window.wc.wcBlocksRegistry,n=window.wc.wcSettings,c=window.wp.element,a=window.wp.htmlEntities,i=({labelMessage:t,helperMessage:n,inputName:c,hiddenId:a,inputDataCheckout:i,selectId:o,selectName:r,selectDataCheckout:s,flagError:l,documents:m,validate:d})=>(0,e.createElement)("div",{className:"mp-checkout-ticket-input-document"},(0,e.createElement)("input-document",{"label-message":t,"helper-message":n,"input-name":c,"hidden-id":a,"input-data-checkout":i,"select-id":o,"select-name":r,"select-data-checkout":s,"flag-error":l,documents:m,validate:d})),o=({isVisible:t,message:n,inputId:c,id:a,dataMain:i})=>(0,e.createElement)("input-table",{isVisible:t,message:n,"input-id":c,id:a,"data-main":i}),r=({name:t,buttonName:n,columns:c})=>(0,e.createElement)("input-table",{name:t,"button-name":n,columns:c}),s=({description:t,linkText:n,linkSrc:c,checkoutClass:a="pro"})=>(0,e.createElement)("div",{className:`mp-checkout-${a}-terms-and-conditions`},(0,e.createElement)("terms-and-conditions",{description:t,"link-text":n,"link-src":c})),l=({title:t,description:n,linkText:c,linkSrc:a})=>(0,e.createElement)("div",{className:"mp-checkout-pro-test-mode"},(0,e.createElement)("test-mode",{title:t,description:n,"link-text":c,"link-src":a}));var m;const d=(0,n.getSetting)("woo-mercado-pago-ticket_data",{}),u=(0,a.decodeEntities)(d.title)||"Checkout Ticket",p=t=>{const{test_mode_title:n,test_mode_description:a,test_mode_link_text:m,test_mode_link_src:u,input_document_label:p,input_document_helper:_,ticket_text_label:k,input_table_button:h,input_helper_label:E,payment_methods:g,currency_ratio:y,amount:b,site_id:w,terms_and_conditions_description:N,terms_and_conditions_link_text:S,terms_and_conditions_link_src:v,test_mode:f}=d.params,{eventRegistration:x,emitResponse:C}=t,{onPaymentSetup:M}=x,T=(0,c.useRef)(null);let R={labelMessage:p,helperMessage:_,inputName:"mercadopago_ticket[docNumber]",selectId:"docType",selectName:"mercadopago_ticket[docType]",flagError:"mercadopago_ticket[docNumberError]",documents:null,validate:"true"};return"MLB"===w?R.documents='["CPF","CNPJ"]':"MLU"===w&&(R.documents='["CI","OTRO"]'),(0,c.useEffect)((()=>{const e=M((async()=>{const e={payment_from_blocks:!0};e.amount=b.toString(),e.site_id=w,e.currency_ratio=y,e.mercadopago_ticket_doc_number=T.current.querySelector("#form-checkout__identificationNumber-container > input").value,e.mercadopago_ticket_doc_type=T.current.querySelector("#docType").value;const t=g.find((e=>{const t=`#${e.id}`,n=T.current.querySelector(t);return n&&n.checked}));return t&&(e.mercadopago_ticket_payment_method=T.current.querySelector(`#${t.id}`).value),{type:C.responseTypes.SUCCESS,meta:{paymentMethodData:e}}}));return()=>{e()}}),[C.responseTypes.ERROR,C.responseTypes.SUCCESS,M]),(0,e.createElement)("div",{className:"mp-checkout-container"},(0,e.createElement)("div",{className:"mp-checkout-ticket-container"},(0,e.createElement)("div",{ref:T,className:"mp-checkout-ticket-content"},f?(0,e.createElement)(l,{title:n,description:a,"link-text":m,"link-src":u}):null,R?(0,e.createElement)(i,{...R}):null,(0,e.createElement)("p",{className:"mp-checkout-ticket-tex"},k),(0,e.createElement)(r,{name:"mercadopago_ticket[paymentMethodId]",buttonName:h,columns:JSON.stringify(g)}),(0,e.createElement)(o,{isVisible:"false",message:E,inputId:"mp-payment-method-helper",id:"payment-method-helper"}),(0,e.createElement)("div",{id:"mp-box-loading"}))),(0,e.createElement)(s,{description:N,linkText:S,linkSrc:v,checkoutClass:"ticket"}))},_={name:"woo-mercado-pago-ticket",label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components;return(0,e.createElement)(n,{text:u})}),null),content:(0,e.createElement)(p,null),edit:(0,e.createElement)(p,null),canMakePayment:()=>!0,ariaLabel:u,supports:{features:null!==(m=d?.supports)&&void 0!==m?m:[]}};(0,t.registerPaymentMethod)(_)})();