(()=>{"use strict";const e=window.React,t=window.wc.wcSettings,c=window.wp.htmlEntities,a=window.wc.wcBlocksRegistry,n=window.wp.element,m=({labelMessage:t,helperMessage:c,inputName:a,hiddenId:n,inputDataCheckout:m,selectId:l,selectName:s,selectDataCheckout:i,flagError:o,documents:r,validate:d})=>(0,e.createElement)("div",{className:"mp-checkout-ticket-input-document"},(0,e.createElement)("input-document",{"label-message":t,"helper-message":c,"input-name":a,"hidden-id":n,"input-data-checkout":m,"select-id":l,"select-name":s,"select-data-checkout":i,"flag-error":o,documents:r,validate:d})),l=({isVisible:t,message:c,inputId:a,id:n,dataMain:m})=>(0,e.createElement)("input-table",{isVisible:t,message:c,"input-id":a,id:n,"data-main":m}),s=({isOptinal:t,message:c,forId:a})=>(0,e.createElement)("input-label",{isOptinal:t,message:c,for:a}),i=({methods:t})=>(0,e.createElement)("div",{className:"mp-checkout-custom-available-payments-content"},(0,e.createElement)("payment-methods",{methods:t})),o=({description:t,linkText:c,linkSrc:a})=>(0,e.createElement)("div",{className:"mp-checkout-pro-terms-and-conditions"},(0,e.createElement)("terms-and-conditions",{description:t,"link-text":c,"link-src":a})),r=({title:t,description:c,linkText:a,linkSrc:n})=>(0,e.createElement)("div",{className:"mp-checkout-pro-test-mode"},(0,e.createElement)("test-mode",{title:t,description:c,"link-text":a,"link-src":n}));var d;const p=(0,t.getSetting)("woo-mercado-pago-custom_data",{}),u=(0,c.decodeEntities)(p.title)||"Checkout Custom",_=t=>{const{test_mode:c,test_mode_title:a,test_mode_description:d,test_mode_link_text:u,test_mode_link_src:_,wallet_button:h,wallet_button_image:k,wallet_button_title:E,wallet_button_description:y,wallet_button_button_text:v,available_payments_title_icon:b,available_payments_title:g,available_payments_image:f,payment_methods_items:w,payment_methods_promotion_link:x,payment_methods_promotion_text:N,site_id:C,card_form_title:I,card_number_input_label:S,card_number_input_helper:M,card_holder_name_input_label:T,card_holder_name_input_helper:V,card_expiration_input_label:O,card_expiration_input_helper:R,card_security_code_input_label:D,card_security_code_input_helper:F,card_document_input_label:P,card_document_input_helper:B,card_installments_title:L,card_issuer_input_label:H,card_installments_input_helper:U,terms_and_conditions_description:j,terms_and_conditions_link_text:q,terms_and_conditions_link_src:Q,amount:Y,currency_ratio:z}=p.params,{eventRegistration:A,emitResponse:G}=t,{onPaymentSetup:J}=A,K=(0,n.useRef)(null);return window.mpCheckoutForm=document.querySelector(".wc-block-components-form.wc-block-checkout__form"),window.mpFormId="blocks_checkout_form",jQuery(window.mpCheckoutForm).prop("id",mpFormId),(0,n.useEffect)((()=>{initCardForm();const e=J((async()=>{try{const e=await cardForm.createCardToken();document.querySelector("#cardTokenId").value=e.token}catch(e){console.warn("Token creation error: ",e)}const e=K.current,t={};return e.childNodes.forEach((e=>{"INPUT"===e.tagName&&e.name&&(console.log("processing "+e.name+" as "+e.value),t[e.name]=e.value)})),{type:G.responseTypes.SUCCESS,meta:{paymentMethodData:t}}}));return()=>{e()}}),[G.responseTypes.ERROR,G.responseTypes.SUCCESS,J]),(0,e.createElement)("div",null,(0,e.createElement)("div",{class:"mp-checkout-custom-load"},(0,e.createElement)("div",{class:"spinner-card-form"})),(0,e.createElement)("div",{class:"mp-checkout-container"},(0,e.createElement)("div",{class:"mp-checkout-custom-container"},c?(0,e.createElement)("div",{class:"mp-checkout-pro-test-mode"},(0,e.createElement)(r,{title:a,description:d,linkText:u,linkSrc:_})):null,"yes"===h?(0,e.createElement)("div",{class:"mp-wallet-button-container"},(0,e.createElement)("img",{src:k}),(0,e.createElement)("div",{class:"mp-wallet-button-title"},(0,e.createElement)("span",null,E)),(0,e.createElement)("div",{class:"mp-wallet-button-description"},y),(0,e.createElement)("div",{class:"mp-wallet-button-button"},(0,e.createElement)("button",{id:"mp-wallet-button",onclick:e=>{e.preventDefault(),jQuery("#mp_checkout_type").val("wallet_button"),form.submit()}},v))):null,(0,e.createElement)("div",{id:"mp-custom-checkout-form-container"},(0,e.createElement)("div",{class:"mp-checkout-custom-available-payments"},(0,e.createElement)("div",{class:"mp-checkout-custom-available-payments-header",onClick:()=>{const e=document.getElementsByClassName("mp-checkout-custom-available-payments")[0],t=e.getElementsByClassName("mp-checkout-custom-available-payments-header")[0].getElementsByClassName("mp-checkout-custom-available-payments-collapsible")[0],c=e.getElementsByClassName("mp-checkout-custom-available-payments-content")[0];if(c.style.maxHeight)c.style.maxHeight=null,c.style.padding="0px",t.src=p.params.available_payments_chevron_down;else{let e=c.scrollHeight+15+"px";c.style.setProperty("max-height",e,"important"),c.style.setProperty("padding","24px 0px 0px","important"),t.src=p.params.available_payments_chevron_up}}},(0,e.createElement)("div",{class:"mp-checkout-custom-available-payments-title"},(0,e.createElement)("img",{src:b,class:"mp-icon"}),(0,e.createElement)("p",{class:"mp-checkout-custom-available-payments-text"},g)),(0,e.createElement)("img",{src:f,class:"mp-checkout-custom-available-payments-collapsible"})),(0,e.createElement)("div",{class:"mp-checkout-custom-available-payments-content"},(0,e.createElement)(i,{methods:w}),"MLA"===C?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("span",{id:"mp_promotion_link"}," | "),(0,e.createElement)("a",{href:x,id:"mp_checkout_link",class:"mp-checkout-link mp-pl-10",target:"_blank"},N)):null,(0,e.createElement)("hr",null))),(0,e.createElement)("div",{class:"mp-checkout-custom-card-form"},(0,e.createElement)("p",{class:"mp-checkout-custom-card-form-title"},I),(0,e.createElement)("div",{class:"mp-checkout-custom-card-row"},(0,e.createElement)(s,{isOptinal:!1,message:S,forId:"mp-card-number"}),(0,e.createElement)("div",{class:"mp-checkout-custom-card-input",id:"form-checkout__cardNumber-container"}),(0,e.createElement)(l,{isVisible:!1,message:M,inputId:"mp-card-number-helper"})),(0,e.createElement)("div",{class:"mp-checkout-custom-card-row",id:"mp-card-holder-div"},(0,e.createElement)(s,{message:T,isOptinal:!1}),(0,e.createElement)("input",{class:"mp-checkout-custom-card-input mp-card-holder-name",placeholder:"Ex.: María López",id:"form-checkout__cardholderName",name:"mp-card-holder-name","data-checkout":"cardholderName"}),(0,e.createElement)(l,{isVisible:!1,message:V,inputId:"mp-card-holder-name-helper",dataMain:"mp-card-holder-name"})),(0,e.createElement)("div",{class:"mp-checkout-custom-card-row mp-checkout-custom-dual-column-row"},(0,e.createElement)("div",{class:"mp-checkout-custom-card-column"},(0,e.createElement)(s,{message:O,isOptinal:!1}),(0,e.createElement)("div",{id:"form-checkout__expirationDate-container",class:"mp-checkout-custom-card-input mp-checkout-custom-left-card-input"}),(0,e.createElement)(l,{isVisible:!1,message:R,inputId:"mp-expiration-date-helper"})),(0,e.createElement)("div",{class:"mp-checkout-custom-card-column"},(0,e.createElement)(s,{message:D,isOptinal:!1}),(0,e.createElement)("div",{id:"form-checkout__securityCode-container",class:"mp-checkout-custom-card-input"}),(0,e.createElement)("p",{id:"mp-security-code-info",class:"mp-checkout-custom-info-text"}),(0,e.createElement)(l,{isVisible:!1,message:F,inputId:"mp-security-code-helper"}))),(0,e.createElement)("div",{id:"mp-doc-div",class:"mp-checkout-custom-input-document",style:{display:"none"}},(0,e.createElement)(m,{labelMessage:P,helperMessage:B,inputName:"identificationNumber",hiddenId:"form-checkout__identificationNumber",inputDataCheckout:"docNumber",selectId:"form-checkout__identificationType",selectName:"identificationType",selectDataCheckout:"docType",flagError:"docNumberError"}))),(0,e.createElement)("div",{id:"mp-checkout-custom-installments",class:"mp-checkout-custom-installments-display-none"},(0,e.createElement)("p",{class:"mp-checkout-custom-card-form-title"},L),(0,e.createElement)("div",{id:"mp-checkout-custom-issuers-container",class:"mp-checkout-custom-issuers-container"},(0,e.createElement)("div",{class:"mp-checkout-custom-card-row"},(0,e.createElement)(s,{isOptinal:!1,message:H,forId:"mp-issuer"})),(0,e.createElement)("div",{class:"mp-input-select-input"},(0,e.createElement)("select",{name:"issuer",id:"form-checkout__issuer",class:"mp-input-select-select"}))),(0,e.createElement)("div",{id:"mp-checkout-custom-installments-container",class:"mp-checkout-custom-installments-container"}),(0,e.createElement)(l,{isVisible:!1,message:U,inputId:"mp-installments-helper"}),(0,e.createElement)("select",{style:{display:"none"},"data-checkout":"installments",name:"installments",id:"form-checkout__installments",class:"mp-input-select-select"}),(0,e.createElement)("div",{id:"mp-checkout-custom-box-input-tax-cft"},(0,e.createElement)("div",{id:"mp-checkout-custom-box-input-tax-tea"},(0,e.createElement)("div",{id:"mp-checkout-custom-tax-tea-text"})),(0,e.createElement)("div",{id:"mp-checkout-custom-tax-cft-text"}))),(0,e.createElement)("div",{class:"mp-checkout-custom-terms-and-conditions"},(0,e.createElement)(o,{description:j,linkText:q,linkSrc:Q}))))),(0,e.createElement)("div",{ref:K,id:"mercadopago-utilities",style:{display:"none"}},(0,e.createElement)("input",{type:"hidden",id:"mp-amount",defaultValue:Y,name:"mercadopago_custom[amount]"}),(0,e.createElement)("input",{type:"hidden",id:"currency_ratio",defaultValue:z,name:"mercadopago_custom[currency_ratio]"}),(0,e.createElement)("input",{type:"hidden",id:"paymentMethodId",name:"mercadopago_custom[payment_method_id]"}),(0,e.createElement)("input",{type:"hidden",id:"mp_checkout_type",name:"mercadopago_custom[checkout_type]",value:"custom"}),(0,e.createElement)("input",{type:"hidden",id:"cardExpirationMonth","data-checkout":"cardExpirationMonth"}),(0,e.createElement)("input",{type:"hidden",id:"cardExpirationYear","data-checkout":"cardExpirationYear"}),(0,e.createElement)("input",{type:"hidden",id:"cardTokenId",name:"mercadopago_custom[token]"}),(0,e.createElement)("input",{type:"hidden",id:"cardInstallments",name:"mercadopago_custom[installments]"}),(0,e.createElement)("input",{type:"hidden",id:"mpCardSessionId",name:"mercadopago_custom[session_id]"})))},h={name:"woo-mercado-pago-custom",label:(0,e.createElement)((t=>{const{PaymentMethodLabel:c}=t.components;return(0,e.createElement)(c,{text:u})}),null),content:(0,e.createElement)(_,null),edit:(0,e.createElement)(_,null),canMakePayment:()=>!0,ariaLabel:u,supports:{features:null!==(d=p?.supports)&&void 0!==d?d:[]}};(0,a.registerPaymentMethod)(h)})();