var cardForm,isSubmitted=!1;if(document.getElementById("mp-amount"))var amount=document.getElementById("mp-amount").value;var form=document.querySelector("form[name=checkout]"),formId="checkout";function submitChoCustom(){return!!isSubmitted||(cardForm.createCardToken().then((e=>{if(!e.token)throw new Error("cardToken is empty");document.querySelector("#cardTokenId").value=e.token,isSubmitted=!0,jQuery("form.checkout, form#order_review").submit()})).catch((e=>{console.log("ERRO:",e)})),!1)}function init_cardForm(){var e=new MercadoPago(wc_mercadopago_params.public_key);cardForm=e.cardForm({amount,iframe:!0,form:{id:formId,cardNumber:{id:"form-checkout__cardNumber-container",placeholder:"0000 0000 0000 0000",style:{"font-size":"16px",height:"40px",padding:"14px"}},cardholderName:{id:"form-checkout__cardholderName",placeholder:"Ex.: María López"},cardExpirationDate:{id:"form-checkout__cardExpirationDate-container",placeholder:wc_mercadopago_params.placeholders.cardExpirationDate,mode:"short",style:{"font-size":"16px",height:"40px",padding:"14px"}},securityCode:{id:"form-checkout__securityCode-container",placeholder:"123",style:{"font-size":"16px",height:"40px",padding:"14px"}},identificationType:{id:"form-checkout__identificationType"},identificationNumber:{id:"form-checkout__identificationNumber"},issuer:{id:"form-checkout__issuer",placeholder:wc_mercadopago_params.placeholders.issuer},installments:{id:"form-checkout__installments",placeholder:wc_mercadopago_params.placeholders.installments}},callbacks:{onFormMounted:function(e){if(e)return console.log("Callback para tratar o erro: montando o cardForm ",e)},onInstallmentsReceived:(e,t)=>{if(e)return console.warn("Installments handling error: ",e);setChangeEventOnInstallments(getCountry(),t)},onCardTokenReceived:e=>{if(e)return console.warn("Token handling error: ",e)},onPaymentMethodsReceived:(e,t)=>{try{t?(setPaymentMethodId(t[0].id),setCvvHint(t[0].settings[0].security_code),changeCvvPlaceHolder(t[0].settings[0].security_code.length),clearInputs(),removeInputHelper("mp-card-number"),setImageCard(t[0].thumbnail),handleInstallments(t[0].payment_type_id),loadAdditionalInfo(t[0].additional_info_needed),additionalInfoHandler()):showInputHelper("mp-card-number")}catch(e){showInputHelper("mp-card-number")}},onError:function(e){e.forEach((e=>e.message.includes("cardNumber")?showInputHelper("mp-card-number"):e.message.includes("cardholderName")?showInputHelper("mp-card-holder-name"):e.message.includes("expirationMonth")||e.message.includes("expirationYear")?showInputHelper("mp-expiration-date"):e.message.includes("CVV")?showInputHelper("mp-cvv"):e.message.includes("identificationNumber")?showInputHelper("mp-doc-number"):console.log("Unknown error: "+e)))},onSubmit:function(e){e.preventDefault(),verifyInstallments()},onValidityChange:function(e,t){if(e){let n=getHelperMessage(t);return"cardNumber"==t?(n.innerHTML=wc_mercadopago_params.input_helper_message[t][e[0].cause],document.getElementById("form-checkout__cardNumber-container").style.background="no-repeat #fff",removeAdditionFields()):n.innerHTML="cardholderName"==t?wc_mercadopago_params.input_helper_message[t][e[0].code]:wc_mercadopago_params.input_helper_message[t][e[0].cause],showInputHelper(inputHelperName(t))}return removeInputHelper(inputHelperName(t))}}})}function getHelperMessage(e){let t="input-helper[input-id="+inputHelperName(e)+"-helper]";return document.querySelector(t).querySelector("div[class=mp-helper-message]")}function verifyInstallments(){""==document.getElementById("cardInstallments").value&&showInputHelper("mp-installments")}function changeCvvPlaceHolder(e){let t="";for(let n=0;n<e;n++)t+=n+1;cardForm.update("securityCode",{placeholder:t})}function removeInstallmentsValue(){document.getElementById("cardInstallments").value=""}function removeAdditionFields(){hideDocumentField(),hideInstallments(),hideIssuer(),removeInputHelper("installments"),removeInstallmentsValue()}function inputHelperName(e){return{cardNumber:"mp-card-number",cardholderName:"mp-card-holder-name",expirationDate:"mp-expiration-date",CVV:"mp-cvv",identificationNumber:"mp-doc-number"}[e]}function hideErrors(){document.querySelectorAll("input-helper").forEach((e=>{e.querySelector("div").style.display="none"}))}form?form.id=formId:formId="order_review",clearInputs=function(){hideErrors(),document.getElementById("form-checkout__cardNumber-container").style.background="no-repeat #fff",document.getElementById("form-checkout__cardExpirationDate-container").value="",document.getElementById("form-checkout__identificationNumber").value="",document.getElementById("form-checkout__securityCode-container").value="",document.getElementById("form-checkout__cardholderName").value=""},showInputHelper=function(e){let t=document.querySelector("input-helper[input-id="+e+"-helper]");if(t){t.querySelector("div").style.display="flex"}},removeInputHelper=function(e){let t=document.querySelector("input-helper[input-id="+e+"-helper]");if(t){t.querySelector("div").style.display="none"}};const setChangeEventOnInstallments=function(e,t){let n=[];const o=[];clearInstallmentsComponent(),n=t.payer_costs,n&&showInstallments();for(let e=0;e<n.length;e++){const t=n[e].installments,r=0===n[e].installment_rate;o.push({id:`installment-${t}`,value:t,rowText:`${t}x ${formatCurrency(n[e].installment_amount)}`,rowObs:r?wc_mercadopago_params.installmentObsFee:formatCurrency(n[e].total_amount),highlight:r?"true":"",dataRate:argentinaResolution(n[e].labels)})}const r=document.createElement("input-table");function a(){const e=document.getElementsByClassName("mp-input-table-label");for(var t=0;t<e.length;t++){let n=e[t].getElementsByTagName("input")[0].value;e[t].addEventListener("click",showTaxes),e[t].addEventListener("click",(()=>{document.getElementById("form-checkout__installments").value=n,document.getElementById("cardInstallments").value=n}))}}r.setAttribute("name","mp-installments"),r.setAttribute("button-name",wc_mercadopago_params.installmentButton),r.setAttribute("columns",JSON.stringify(o)),showInstallments(),showInstallmentsComponent(r),a(),document.getElementById("more-options").addEventListener("click",(()=>{setTimeout((()=>{a()}),100)})),"mla"===e&&clearTax()};function formatCurrency(e){return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",currencyDisplay:"narrowSymbol"}).format(e)}function argentinaResolution(e){let t="";if("mla"===getCountry()){for(let n=0;n<e.length;n++)-1!==e[n].indexOf("CFT_")&&(t=e[n]);return t}return t}function clearTax(){document.querySelector("#mp-checkout-custom-box-input-tax-cft").style.display="none",document.querySelector("#mp-checkout-custom-tax-cft-text").innerHTML="",document.querySelector("#mp-checkout-custom-tax-tea-text").innerHTML=""}function showInstallments(){document.getElementById("mp-checkout-custom-installments").style.display="block"}function hideInstallments(){document.getElementById("mp-checkout-custom-installments").style.display="none"}function showInstallmentsComponent(e){const t=document.getElementById("mp-checkout-custom-installments-container");t.classList.add("mp-checkout-custom-installments-container"),t.appendChild(e)}function clearInstallmentsComponent(){const e=document.getElementById("mp-checkout-custom-installments-container");e.classList.remove("mp-checkout-custom-installments-container"),e.firstElementChild&&e.removeChild(e.firstElementChild)}function showDocumentField(){document.getElementById("mp-doc-div").style.display="block"}function hideDocumentField(){document.getElementById("mp-doc-div").style.display="none"}function showIssuer(){document.getElementById("form-checkout__issuer").style.display="block"}function hideIssuer(){document.getElementById("form-checkout__issuer").style.display="none"}function showTaxes(){const e=document.querySelectorAll(".mp-input-radio-radio");let t=null,n="block";e.forEach((e=>{e.checked&&(t=e.getAttribute("datarate"))}));let o="",r="";if(null!=t){const e=t.split("|");o=e[0].replace("_"," "),r=e[1].replace("_"," "),"CFT 0,00%"===o&&"TEA 0,00%"===r&&(n="none",o="",r="")}document.querySelector("#mp-checkout-custom-box-input-tax-cft").style.display=n,document.querySelector("#mp-checkout-custom-tax-cft-text").innerHTML=o,document.querySelector("#mp-checkout-custom-tax-tea-text").innerHTML=r}const getCountry=function(){return wc_mercadopago_params.site_id},cvvLocationTranslate=function(e){return $cvv_front=wc_mercadopago_params.cvvHint.front,$cvv_back=wc_mercadopago_params.cvvHint.back,"back"===e?$cvv_back:$cvv_front},setCvvHint=function(e){var t,n=wc_mercadopago_params.cvvText;n=`${e.length} ${n} `,n+=(t=e.card_location,$cvv_front=wc_mercadopago_params.cvvHint.front,$cvv_back=wc_mercadopago_params.cvvHint.back,"back"===t?$cvv_back:$cvv_front),document.getElementById("mp-security-code-info").innerText=n},setImageCard=function(e){document.getElementById("form-checkout__cardNumber-container").style.background="url("+e+") 98% 50% no-repeat #fff",document.getElementById("form-checkout__cardNumber-container").style.backgroundSize="auto 24px"},setPaymentMethodId=function(e){document.getElementById("paymentMethodId").value=e},handleInstallments=function(e){"debit_card"===e?document.getElementById("form-checkout__installments").setAttribute("disabled","disabled"):document.getElementById("form-checkout__installments").removeAttribute("disabled")},loadAdditionalInfo=function(e){additionalInfoNeeded={issuer:!1,cardholder_name:!1,cardholder_identification_type:!1,cardholder_identification_number:!1};for(let t=0;t<e.length;t++)"issuer_id"===e[t]&&(additionalInfoNeeded.issuer=!0),"cardholder_name"===e[t]&&(additionalInfoNeeded.cardholder_name=!0),"cardholder_identification_type"===e[t]&&(additionalInfoNeeded.cardholder_identification_type=!0),"cardholder_identification_number"===e[t]&&(additionalInfoNeeded.cardholder_identification_number=!0)},additionalInfoHandler=function(){additionalInfoNeeded.cardholder_name?document.getElementById("form-checkout__cardholderName").style.display="block":document.getElementById("form-checkout__cardholderName").style.display="none",additionalInfoNeeded.issuer?document.getElementById("form-checkout__issuer").style.display="block":document.getElementById("form-checkout__issuer").style.display="none",additionalInfoNeeded.cardholder_identification_type&&additionalInfoNeeded.cardholder_identification_number?showDocumentField():hideDocumentField()};jQuery("form.checkout").on("checkout_place_order_woo-mercado-pago-custom",(function(){return submitChoCustom()})),jQuery("form#order_review").submit((function(){return submitChoCustom()}));