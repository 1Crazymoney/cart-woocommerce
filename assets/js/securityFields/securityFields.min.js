var cardForm,mercado_pago_submit=!1;if(document.getElementById("mp-amount"))var amount=document.getElementById("mp-amount").value;var form=document.querySelector("form[name=checkout]"),formId="checkout";function mercadoPagoFormHandler(){return mercado_pago_submit?(mercado_pago_submit=!1,!0):"wallet_button"===jQuery("#mp_checkout_type").val()||(jQuery("#mp_checkout_type").val("custom"),!!CheckoutPage.validateInputsCreateToken()&&createToken())}function createToken(){return cardForm.createCardToken().then((e=>{if(!e.token)throw new Error("cardToken is empty");document.querySelector("#cardTokenId").value=e.token,mercado_pago_submit=!0,jQuery("form.checkout, form#order_review").submit()})).catch((e=>{console.log("Token creation error: ",e)})),!1}function init_cardForm(){var e=new MercadoPago(wc_mercadopago_params.public_key);cardForm=e.cardForm({amount,iframe:!0,form:{id:formId,cardNumber:{id:"form-checkout__cardNumber-container",placeholder:"0000 0000 0000 0000",style:{"font-size":"16px",height:"40px",padding:"14px"}},cardholderName:{id:"form-checkout__cardholderName",placeholder:"Ex.: María López"},cardExpirationDate:{id:"form-checkout__cardExpirationDate-container",placeholder:wc_mercadopago_params.placeholders.cardExpirationDate,mode:"short",style:{"font-size":"16px",height:"40px",padding:"14px"}},securityCode:{id:"form-checkout__securityCode-container",placeholder:"123",style:{"font-size":"16px",height:"40px",padding:"14px"}},identificationType:{id:"form-checkout__identificationType"},identificationNumber:{id:"form-checkout__identificationNumber"},issuer:{id:"form-checkout__issuer",placeholder:wc_mercadopago_params.placeholders.issuer},installments:{id:"form-checkout__installments",placeholder:wc_mercadopago_params.placeholders.installments}},callbacks:{onFormMounted:function(e){if(e)return console.log("Callback to handle the error: creating the CardForm",e)},onInstallmentsReceived:(e,o)=>{if(e)return console.warn("Installments handling error: ",e);CheckoutPage.setChangeEventOnInstallments(CheckoutPage.getCountry(),o)},onCardTokenReceived:e=>{if(e)return console.warn("Token handling error: ",e)},onPaymentMethodsReceived:(e,o)=>{try{o?(CheckoutPage.setValue("paymentMethodId",o[0].id),CheckoutPage.setCvvHint(o[0].settings[0].security_code),CheckoutPage.changeCvvPlaceHolder(o[0].settings[0].security_code.length),CheckoutPage.clearInputs(),CheckoutPage.setDisplayOfInputHelper("mp-card-number","none"),CheckoutPage.setImageCard(o[0].thumbnail),CheckoutPage.handleInstallments(o[0].payment_type_id),CheckoutPage.loadAdditionalInfo(o[0].additional_info_needed),CheckoutPage.additionalInfoHandler(additionalInfoNeeded)):CheckoutPage.setDisplayOfInputHelper("mp-card-number","flex")}catch(e){CheckoutPage.setDisplayOfInputHelper("mp-card-number","flex")}},onError:function(e){e.forEach((e=>e.message.includes("cardNumber")?CheckoutPage.setDisplayOfInputHelper("mp-card-number","flex"):e.message.includes("cardholderName")?CheckoutPage.setDisplayOfInputHelper("mp-card-holder-name","flex"):e.message.includes("expirationMonth")||e.message.includes("expirationYear")?CheckoutPage.setDisplayOfInputHelper("mp-expiration-date","flex"):e.message.includes("securityCode")?CheckoutPage.setDisplayOfInputHelper("mp-security-code","flex"):e.message.includes("identificationNumber")?CheckoutPage.setDisplayOfInputHelper("mp-doc-number","flex"):console.log("Unknown error: "+e)))},onSubmit:function(e){e.preventDefault()},onValidityChange:function(e,o){if(e){let a=CheckoutPage.getHelperMessage(o),r=wc_mercadopago_params.input_helper_message[o][e[0].code];return a.innerHTML=r||wc_mercadopago_params.input_helper_message[o].invalid_length,"cardNumber"==o&&(CheckoutPage.setBackground("fcCardholderNameContainer","no-repeat #fff"),CheckoutPage.removeAdditionFields()),CheckoutPage.setDisplayOfInputHelper(CheckoutPage.inputHelperName(o),"flex")}return CheckoutPage.setDisplayOfInputHelper(CheckoutPage.inputHelperName(o),"none")}}})}form?form.id=formId:formId="order_review",jQuery("form.checkout").on("checkout_place_order_woo-mercado-pago-custom",(function(){return mercadoPagoFormHandler()})),jQuery("form#order_review").submit((function(){if(document.getElementById("payment_method_woo-mercado-pago-custom").checked)return mercadoPagoFormHandler();cardForm.unmount()}));